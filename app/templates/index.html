<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ app_name }}</title>
  </head>

  <body style="font-family: Arial; padding: 24px;">
    <h1>ðŸš€ TEMPLATE funcionando mal!</h1>
    <p><b>Version:</b> {{ app_version }}</p>

    <p>Se vocÃª estÃ¡ vendo isso, o site estÃ¡ rodando dentro do Docker!</p>

    <img
      src="/static/{{ image_file }}"
      alt="Imagem"
      style="max-width: 360px; border-radius: 12px;"
    />

    <hr style="margin: 18px 0;" />

    <h3>Health Check</h3>
    <button id="btnHealth" style="padding: 10px 14px; cursor: pointer;">
      Check Health
    </button>

    <span id="healthResult" style="margin-left: 12px; font-weight: bold;"></span>

    <p style="margin-top: 16px;">
      Links:
      <a href="/health">/health</a> |
      <a href="/version">/version</a>
    </p>

    <script>
      const btn = document.getElementById("btnHealth");
      const result = document.getElementById("healthResult");

      btn.addEventListener("click", async () => {
        result.textContent = "Checking...";
        result.style.color = "black";

        try {
          const res = await fetch("/health");
          if (!res.ok) throw new Error("HTTP " + res.status);

          const data = await res.json();

          result.textContent = `ðŸŸ¢ ${data.status} (at ${data.checked_at})`;
          result.style.color = "green";
        } catch (err) {
          result.textContent = `ðŸ”´ error: ${err.message}`;
          result.style.color = "red";
        }
      });
    </script>
  </body>
</html>
